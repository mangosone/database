-- ----------------------------------------
-- Added to prevent timeout's while loading
-- ----------------------------------------
SET GLOBAL net_read_timeout=30;
SET GLOBAL net_write_timeout=60;
SET GLOBAL net_buffer_length=1000000; 
SET GLOBAL max_allowed_packet=1000000000;
SET GLOBAL connect_timeout=10000000;

-- --------------------------------------------------------------------------------
-- This is an attempt to create a full transactional MaNGOS update (v1.3)
-- --------------------------------------------------------------------------------
DROP PROCEDURE IF EXISTS `update_mangos`; 

DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `update_mangos`()
BEGIN
    DECLARE bRollback BOOL  DEFAULT FALSE ;
    DECLARE CONTINUE HANDLER FOR SQLEXCEPTION SET `bRollback` = TRUE;

    -- Current Values (TODO - must be a better way to do this)
    SET @cCurVersion := (SELECT `version` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
    SET @cCurStructure := (SELECT structure FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
    SET @cCurContent := (SELECT content FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);

    -- Expected Values
    SET @cOldVersion = '21'; 
    SET @cOldStructure = '07'; 
    SET @cOldContent = '011';

    -- New Values
    SET @cNewVersion = '21';
    SET @cNewStructure = '07';
    SET @cNewContent = '012';
                            -- DESCRIPTION IS 30 Characters MAX    
    SET @cNewDescription = 'Bloodmyst_Isle_Part_4';

                        -- COMMENT is 150 Characters MAX
    SET @cNewComment = 'Bloodmyst_Isle_Part_4';

    -- Evaluate all settings
    SET @cCurResult := (SELECT description FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
    SET @cOldResult := (SELECT description FROM db_version WHERE `version`=@cOldVersion AND `structure`=@cOldStructure AND `content`=@cOldContent);
    SET @cNewResult := (SELECT description FROM db_version WHERE `version`=@cNewVersion AND `structure`=@cNewStructure AND `content`=@cNewContent);

    IF (@cCurResult = @cOldResult) THEN    -- Does the current version match the expected version
        -- APPLY UPDATE
        START TRANSACTION;

        -- UPDATE THE DB VERSION
        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
        INSERT INTO `db_version` VALUES (@cNewVersion, @cNewStructure, @cNewContent, @cNewDescription, @cNewComment);
        SET @cNewResult := (SELECT description FROM db_version WHERE `version`=@cNewVersion AND `structure`=@cNewStructure AND `content`=@cNewContent);

        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
        -- -- PLACE UPDATE SQL BELOW -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -

 -- Bloodmyst Isle Part4.

-- Gameobjects
UPDATE gameobject SET position_x = -1646.829, position_y = -10921.78, position_z = 58.90407, orientation = 1.588249, rotation2 = 0.7132502, rotation3 = 0.7009096 WHERE guid = 28522;

-- Creatures
-- missing spawns
-- duplicates removed + missing added
DELETE FROM creature WHERE guid IN (95023,95030,94965,62701,95015,94988,94996,95004,95008,95003,95025,95021,95011,94971,94986,94989,94987,94985,94984,94982,94980,63052,94981,63020,63043,63046,94976,95003,63312);
DELETE FROM creature_addon WHERE guid IN (95023,95030,94965,62701,95015,94988,94996,95004,95008,95003,95025,95021,95011,94971,94986,94989,94987,94985,94984,94982,94980,63052,94981,63020,63043,63046,94976,95003,63312);
DELETE FROM creature_movement WHERE id IN (95023,95030,94965,62701,95015,94988,94996,95004,95008,95003,95025,95021,95011,94971,94986,94989,94987,94985,94984,94982,94980,63052,94981,63020,63043,63046,94976,95003,63312);
DELETE FROM game_event_creature WHERE guid IN (95023,95030,94965,62701,95015,94988,94996,95004,95008,95003,95025,95021,95011,94971,94986,94989,94987,94985,94984,94982,94980,63052,94981,63020,63043,63046,94976,95003,63312);
DELETE FROM game_event_creature_data WHERE guid IN (95023,95030,94965,62701,95015,94988,94996,95004,95008,95003,95025,95021,95011,94971,94986,94989,94987,94985,94984,94982,94980,63052,94981,63020,63043,63046,94976,95003,63312);
DELETE FROM creature_battleground WHERE guid IN (95023,95030,94965,62701,95015,94988,94996,95004,95008,95003,95025,95021,95011,94971,94986,94989,94987,94985,94984,94982,94980,63052,94981,63020,63043,63046,94976,95003,63312);
DELETE FROM creature_linking WHERE guid IN (95023,95030,94965,62701,95015,94988,94996,95004,95008,95003,95025,95021,95011,94971,94986,94989,94987,94985,94984,94982,94980,63052,94981,63020,63043,63046,94976,95003,63312) OR master_guid IN (95023,95030,94965,62701,95015,94988,94996,95004,95008,95003,95025,95021,95011,94971,94986,94989,94987,94985,94984,94982,94980,63052,94981,63020,63043,63046,94976,95003,63312);

SET @GUID := (SELECT MAX(guid) FROM `creature`);
INSERT INTO creature (guid, id, map, spawnMask, modelid, equipment_id, position_x, position_y, position_z, orientation, spawntimesecs, spawndist, currentwaypoint, curhealth, curmana, DeathState, MovementType) VALUES 
(@GUID+1,17609,530,1,0,0,-1957.54,-10546.8,176.959,3.71904,300,0,0,1050,390,0,0),
(@GUID+2,17609,530,1,0,0,-1968.46,-10619,163.838,5.676,300,0,0,1050,390,0,0),
(94965,17610,530,1,0,0,-1965.61,-10620.2,163.838,2.55875,300,0,0,1062,3060,0,0),
(95023,17610,530,1,0,0,-1960.72,-10549.7,176.892,0.701538,300,0,0,1062,3060,0,0),
(95015,17610,530,1,0,0,-1961.58,-10523.8,176.967,3.86228,300,0,0,1137,3354,0,2);

-- Updates
DELETE FROM creature_addon WHERE guid IN (63303);
UPDATE creature SET spawndist = 0, MovementType = 0 WHERE guid IN (62436,62044,62045,62046,62047,62048,62049,62050,62051,62052,62053,63313,63318,63308,63295,63296,63322,63319,63344,63315,63323,63331,63326,63353,63327,63328,63348,63324);
UPDATE creature SET position_x = -1989.552856, position_y = -10771.302734, position_z = 88.952332, spawndist = 10, movementtype = 1 WHERE guid = 63316;
UPDATE creature SET position_x = -1889.649414, position_y = -10714.453125, position_z = 110.34134, spawndist = 10, movementtype = 1 WHERE guid = 63342;
UPDATE creature SET position_x = -1949.782227, position_y = -10699.833008, position_z = 111.02949, spawndist = 10, movementtype = 1 WHERE guid = 63339;
UPDATE creature SET position_x = -1889.846558, position_y = -10912.288086, position_z = 65.063454, spawndist = 10, movementtype = 1 WHERE guid = 63303;
UPDATE creature SET position_x = -1882.763672, position_y = -10743.715820, position_z = 109.83604, orientation = 4.477852 WHERE guid = 63314;
UPDATE creature SET position_x = -2030.828979, position_y = -10610.870117, position_z = 148.12056 WHERE guid = 63325;
UPDATE creature SET position_x = -1970.230469, position_y = -10749.439453, position_z = 93.750641 WHERE guid = 63317;
UPDATE creature SET position_x = -2066.400879, position_y = -10844.436523, position_z = 66.595062 WHERE guid = 63311;
UPDATE creature SET position_x = -1987.987793, position_y = -11061.593750, position_z = 57.658443 WHERE guid = 62587;
UPDATE creature SET position_x = -2082.327637, position_y = -10914.611328, position_z = 69.454895 WHERE guid = 94970;
UPDATE creature SET position_x = -1947.678467, position_y = -11140.657227, position_z = 58.276417 WHERE guid = 94979;
UPDATE creature SET position_x = -1593.218994, position_y = -10696.746094, position_z = 132.58762 WHERE guid = 63029;
UPDATE creature SET position_x = -1534.054932, position_y = -10764.884766, position_z = 53.830685 WHERE guid = 63047;
UPDATE creature SET position_x = -2118.644287, position_y = -11115.853516, position_z = 57.207634 WHERE guid = 62702;
UPDATE creature SET position_x = -1808.124512, position_y = -10836.454102, position_z = 67.715385 WHERE guid = 94995;
UPDATE creature SET position_x = -2066.400879, position_y = -10844.436523, position_z = 66.595062 WHERE guid = 63311;

-- Enraged Ravager
UPDATE creature SET spawndist = 10, MovementType = 1 WHERE id = 17527;

-- Sun Gate Event Manager
UPDATE creature SET spawndist = 0, MovementType = 0 WHERE id = 17889;

-- Fenissa the Assassin
UPDATE creature_template_addon SET bytes1 = 0 WHERE entry = 22060;

-- Matis the Cruel
UPDATE creature SET spawndist = 0, MovementType = 2 WHERE guid = 63387;
DELETE FROM creature_movement WHERE id = 63387;
UPDATE creature_template SET MovementType = 2 WHERE entry = 17664;
DELETE FROM creature_movement_template WHERE entry = 17664;
INSERT INTO creature_movement_template (entry, point, position_x, position_y, position_z, waittime, script_id, orientation, model1, model2) VALUES
(17664,1,-1917.35,-10929.6,61.541, 0, 0,2.19459, 0, 0),
(17664,2,-1929.25,-10907.2,62.6743, 0, 0,1.8608, 0, 0),
(17664,3,-1935.67,-10877.1,64.8566, 0, 0,1.77047, 0, 0),
(17664,4,-1940.59,-10853.8,69.1685, 0, 0,1.6291, 0, 0),
(17664,5,-1939.15,-10845.1,71.933, 0, 0,1.04791, 0, 0),
(17664,6,-1934.67,-10837.7,74.4851, 0, 0,1.44846, 0, 0),
(17664,7,-1935.73,-10823.3,79.3717, 0, 0,1.73513, 0, 0),
(17664,8,-1940.26,-10802.2,86.4451, 10000, 0,4.67958, 0, 0),
(17664,9,-1933.92,-10828.4,77.5937, 0, 0,4.94269, 0, 0),
(17664,10,-1933.61,-10836.2,74.9683, 0, 0,4.39684, 0, 0),
(17664,11,-1939.6,-10845.9,71.7024, 0, 0,4.55785, 0, 0),
(17664,12,-1939.63,-10858.2,68.3036, 0, 0,4.9443, 0, 0),
(17664,13,-1934.66,-10885.1,64.065, 0, 0,4.90503, 0, 0),
(17664,14,-1912.98,-10885.2,62.5901, 0, 0,6.24413, 0, 0),
(17664,15,-1901.3,-10885.7,65.7651, 0, 0,6.23235, 0, 0),
(17664,16,-1885.29,-10885.9,66.7829, 10000, 1766401,0.0944586, 0, 0),
(17664,17,-1898.06,-10906.9,64.1897, 0, 0,4.1746, 0, 0),
(17664,18,-1912.31,-10925.5,61.4623, 0, 0,4.53589, 0, 0),
(17664,19,-1908.58,-10941.8,61.4612, 0, 0,5.22703, 0, 0),
(17664,20,-1893.36,-10962.5,61.2537, 0, 0,5.35662, 0, 0),
(17664,21,-1884.23,-10980.4,60.8326, 0, 0,5.07387, 0, 0),
(17664,22,-1881.02,-10998,60.5245, 0, 0,4.73223, 0, 0),
(17664,23,-1883.8,-11019.1,60.0129, 0, 0,4.58301, 0, 0),
(17664,24,-1886.71,-11046.6,59.313, 0, 0,4.96785, 0, 0),
(17664,25,-1884.24,-11058.2,59.516, 0, 0,5.33698, 0, 0),
(17664,26,-1862.52,-11079.7,61.1166, 0, 0,5.8946, 0, 0),
(17664,27,-1834.24,-11091.9,63.3128, 0, 0,5.52155, 0, 0),
(17664,28,-1816.24,-11111.9,64.3889, 0, 0,5.23881, 0, 0),
(17664,29,-1805.47,-11133.9,64.3039, 5000, 0,5.14849, 0, 0),
(17664,30,-1790.49,-11162.9,64.2675, 0, 0,5.18383, 0, 0),
(17664,31,-1777.86,-11180.9,64.3316, 0, 0,4.92858, 0, 0),
(17664,32,-1775.9,-11199.7,63.6491, 0, 0,4.68119, 0, 0),
(17664,33,-1778.98,-11226.4,61.9235, 0, 0,4.5673, 0, 0),
(17664,34,-1784.71,-11254.4,59.7856, 0, 0,4.74402, 0, 0),
(17664,35,-1783.82,-11277.3,58.3305, 0, 0,4.9757, 0, 0),
(17664,36,-1775.11,-11301.9,57.2286, 0, 0,5.20347, 0, 0),
(17664,37,-1761.89,-11330.5,56.1889, 0, 0,5.13671, 0, 0),
(17664,38,-1752.58,-11347.4,55.3093, 0, 0,5.14456, 0, 0),
(17664,39,-1741.77,-11372,53.8783, 0, 0,4.99927, 0, 0),
(17664,40,-1734.44,-11407.4,48.6277, 10000, 0,4.99141, 0, 0),
(17664,41,-1738.91,-11382.6,52.1298, 0, 0,1.76735, 0, 0),
(17664,42,-1744.32,-11366.7,54.3216, 0, 0,1.97548, 0, 0),
(17664,43,-1757.38,-11338,55.8696, 0, 0,2.00297, 0, 0),
(17664,44,-1769.41,-11312.8,56.8602, 0, 0,2.02261, 0, 0),
(17664,45,-1779.43,-11292.9,57.6417, 0, 0,1.83018, 0, 0),
(17664,46,-1784.36,-11268.4,58.8302, 0, 0,1.71237, 0, 0),
(17664,47,-1783.6,-11246.4,60.2839, 0, 0,1.36287, 0, 0),
(17664,48,-1777,-11213.4,62.9699, 0, 0,1.4689, 0, 0),
(17664,49,-1775.89,-11192.7,63.7768, 0, 0,1.80662, 0, 0),
(17664,50,-1783.15,-11174.8,64.1119, 0, 0,2.05402, 0, 0),
(17664,51,-1797.14,-11150.5,64.4089, 0, 0,2.07366, 0, 0),
(17664,52,-1810.11,-11123.5,64.1998, 0, 0,2.01868, 0, 0),
(17664,53,-1820.63,-11106.1,64.2334, 0, 0,2.27393, 0, 0),
(17664,54,-1836.08,-11091.7,63.1688, 0, 0,2.54882, 0, 0),
(17664,55,-1863.87,-11078.6,60.9968, 0, 0,2.3132, 0, 0),
(17664,56,-1884.23,-11058,59.517, 5000, 0,1.85374, 0, 0),
(17664,57,-1886.05,-11036,59.4273, 0, 0,1.61812, 0, 0),
(17664,58,-1882.62,-11011.1,60.1273, 0, 0,1.41785, 0, 0),
(17664,59,-1882.03,-10987.1,60.7278, 0, 0,1.92836, 0, 0),
(17664,60,-1887.39,-10973.1,60.9613, 0, 0,2.10978, 0, 0),
(17664,61,-1898.37,-10955.3,61.3482, 0, 0,2.20403, 0, 0);
DELETE FROM db_scripts WHERE id = 1766401;
INSERT INTO db_scripts (script_type,id, delay, command, datalong, datalong2, buddy_entry, search_radius, data_flags, dataint, dataint2, dataint3, dataint4, x, y, z, o, comments) VALUES
(3,1766401,0,31,17607,20,0,0,0,-9000,0,0,0,0,0,0,0,''),
(3,1766401,1,28,0,0,17607,20,7,0,0,0,0,0,0,0,0,'STATE_STAND'),
(3,1766401,2,3,0,0,17607,20,7,0,0,0,0,0,0,0,3.40747,''),
(3,1766401,3,1,66,0,17607,20,7,0,0,0,0,0,0,0,0,''),
(3,1766401,6,1,66,0,0,0,0,0,0,0,0,0,0,0,0,'');

-- Void Critter, for the purpose of this update the following GUID are reused.
DELETE FROM creature WHERE guid IN (63587,63591,63586,63588,63589,63607,63603,63602,63606,63592,63590);
DELETE FROM creature_addon WHERE guid IN (63587,63591,63586,63588,63589,63607,63603,63602,63606,63592,63590);
DELETE FROM creature_movement WHERE id IN (63587,63591,63586,63588,63589,63607,63603,63602,63606,63592,63590);
DELETE FROM game_event_creature WHERE guid IN (63587,63591,63586,63588,63589,63607,63603,63602,63606,63592,63590);
DELETE FROM game_event_creature_data WHERE guid IN (63587,63591,63586,63588,63589,63607,63603,63602,63606,63592,63590);
DELETE FROM creature_battleground WHERE guid IN (63587,63591,63586,63588,63589,63607,63603,63602,63606,63592,63590);
DELETE FROM creature_linking WHERE guid IN (63587,63591,63586,63588,63589,63607,63603,63602,63606,63592,63590) OR master_guid IN (63587,63591,63586,63588,63589,63607,63603,63602,63606,63592,63590);

INSERT INTO creature (guid, id, map, spawnMask, modelid, equipment_id, position_x, position_y, position_z, orientation, spawntimesecs, spawndist, currentwaypoint, curhealth, curmana, DeathState, MovementType) VALUES 
-- group #1
(63587,17887,530,1,0,0,-2154.79,-10706.6,58.2524,6.2829,60,0,0,410,79,0,2),
(63591,17887,530,1,0,0,-2154.79,-10706.6,58.2524,6.2829,60,0,0,430,115,0,2),
(63586,17887,530,1,0,0,-2154.79,-10706.6,58.2524,6.2829,60,0,0,420,97,0,2),
(63588,17887,530,1,0,0,-2154.79,-10706.6,58.2524,6.2829,60,0,0,410,79,0,2),
(63589,17887,530,1,0,0,-2154.79,-10706.6,58.2524,6.2829,60,0,0,410,79,0,2),
(63607,17887,530,1,0,0,-2154.79,-10706.6,58.2524,6.2829,60,0,0,420,97,0,2),
-- group #2
(63603,17887,530,1,0,0,-2138,-10683.2,57.9303,5.79827,60,0,0,430,115,0,2),
(63602,17887,530,1,0,0,-2138,-10683.2,57.9303,5.79827,60,0,0,410,79,0,2),
(63606,17887,530,1,0,0,-2138,-10683.2,57.9303,5.79827,60,0,0,410,79,0,2),
(63592,17887,530,1,0,0,-2138,-10683.2,57.9303,5.79827,60,0,0,430,115,0,2),
(63590,17887,530,1,0,0,-2138,-10683.2,57.9303,5.79827,60,0,0,410,79,0,2);
DELETE FROM creature_movement WHERE id IN (63587,63591,63586,63588,63589,63607,63603,63602,63606,63592,63590);
INSERT INTO creature_movement (id, point, position_x, position_y, position_z, waittime, script_id, orientation, model1, model2) VALUES
(63587,1,-2154.79,-10706.6,58.2524, 2000, 1788701,6.2829, 0, 0),
(63587,2,-2131.11,-10722.7,64.25, 0, 0,5.51714, 0, 0),
(63587,3,-2113.84,-10736.3,67.9927, 0, 0,5.23204, 0, 0),
(63587,4,-2113.78,-10758.1,67.9927, 10000, 1788702,4.3367, 0, 0),
(63591,1,-2154.79,-10706.6,58.2524, 1200, 1788701,6.2829, 0, 0),
(63591,2,-2131.11,-10722.7,64.25, 0, 0,5.51714, 0, 0),
(63591,3,-2113.84,-10736.3,67.9927, 0, 0,5.23204, 0, 0),
(63591,4,-2113.78,-10758.1,67.9927, 10000, 1788702,4.3367, 0, 0),
(63586,1,-2154.79,-10706.6,58.2524, 1500, 1788701,6.2829, 0, 0),
(63586,2,-2131.11,-10722.7,64.25, 0, 0,5.51714, 0, 0),
(63586,3,-2113.84,-10736.3,67.9927, 0, 0,5.23204, 0, 0),
(63586,4,-2113.78,-10758.1,67.9927, 10000, 1788702,4.3367, 0, 0),
(63588,1,-2154.79,-10706.6,58.2524, 1700, 1788701,6.2829, 0, 0),
(63588,2,-2131.11,-10722.7,64.25, 0, 0,5.51714, 0, 0),
(63588,3,-2113.84,-10736.3,67.9927, 0, 0,5.23204, 0, 0),
(63588,4,-2113.78,-10758.1,67.9927, 10000, 1788702,4.3367, 0, 0),
(63589,1,-2154.79,-10706.6,58.2524, 1900, 1788701,6.2829, 0, 0),
(63589,2,-2131.11,-10722.7,64.25, 0, 0,5.51714, 0, 0),
(63589,3,-2113.84,-10736.3,67.9927, 0, 0,5.23204, 0, 0),
(63589,4,-2113.78,-10758.1,67.9927, 10000, 1788702,4.3367, 0, 0),
(63607,1,-2154.79,-10706.6,58.2524, 1000, 1788701,6.2829, 0, 0),
(63607,2,-2131.11,-10722.7,64.25, 0, 0,5.51714, 0, 0),
(63607,3,-2113.84,-10736.3,67.9927, 0, 0,5.23204, 0, 0),
(63607,4,-2113.78,-10758.1,67.9927, 10000, 1788702,4.3367, 0, 0),
(63603,1,-2138,-10683.2,57.9303, 3000, 1788701,5.79827, 0, 0),
(63603,2,-2106.04,-10696.3,63.9701, 0, 0,5.35059, 0, 0),
(63603,3,-2093.75,-10712.9,67.5059, 0, 0,5.12519, 0, 0),
(63603,4,-2095.73,-10756.2,67.9933, 10000, 1788702,5.09769, 0, 0),
(63602,1,-2138,-10683.2,57.9303, 3200, 1788701,5.79827, 0, 0),
(63602,2,-2106.04,-10696.3,63.9701, 0, 0,5.35059, 0, 0),
(63602,3,-2093.75,-10712.9,67.5059, 0, 0,5.12519, 0, 0),
(63602,4,-2095.73,-10756.2,67.9933, 10000, 1788702,5.09769, 0, 0),
(63606,1,-2138,-10683.2,57.9303, 3500, 1788701,5.79827, 0, 0),
(63606,2,-2106.04,-10696.3,63.9701, 0, 0,5.35059, 0, 0),
(63606,3,-2093.75,-10712.9,67.5059, 0, 0,5.12519, 0, 0),
(63606,4,-2095.73,-10756.2,67.9933, 10000, 1788702,5.09769, 0, 0),
(63592,1,-2138,-10683.2,57.9303, 3700, 1788701,5.79827, 0, 0),
(63592,2,-2106.04,-10696.3,63.9701, 0, 0,5.35059, 0, 0),
(63592,3,-2093.75,-10712.9,67.5059, 0, 0,5.12519, 0, 0),
(63592,4,-2095.73,-10756.2,67.9933, 10000, 1788702,5.09769, 0, 0),
(63590,1,-2138,-10683.2,57.9303, 3900, 1788701,5.79827, 0, 0),
(63590,2,-2106.04,-10696.3,63.9701, 0, 0,5.35059, 0, 0),
(63590,3,-2093.75,-10712.9,67.5059, 0, 0,5.12519, 0, 0),
(63590,4,-2095.73,-10756.2,67.9933, 10000, 1788702,5.09769, 0, 0);
DELETE FROM db_scripts WHERE id IN (1788701, 1788702);
INSERT INTO db_scripts (script_type, id, delay, command, datalong, datalong2, buddy_entry, search_radius, data_flags, dataint, dataint2, dataint3, dataint4, x, y, z, o, comments) VALUES
(3,1788701,0,25,1,0,0,0,0,0,0,0,0,0,0,0,0,'RUN ON'),
(3,1788702,1,20,1,30,0,0,0x08,0,0,0,0,0,0,0,0,'movement chenged to 1:random');

DELETE FROM creature_linking WHERE guid IN (63591,63586,63588,63589,63607,63603,63602,63606,63592);
INSERT INTO creature_linking (guid, master_guid, flag) VALUES
(63591, 63587, 128),
(63586, 63587, 128),
(63588, 63587, 128),
(63589, 63587, 128),
(63607, 63587, 128),
(63603, 63590, 128),
(63602, 63590, 128),
(63606, 63590, 128),
(63592, 63590, 128);

-- Random Waypoints
UPDATE creature SET MovementType = 2, spawndist = 0 WHERE guid IN (77281,63022,63027,63321,63329,63314,95015);
DELETE FROM creature_movement WHERE id IN (77281,63022,63027,63321,63329,63314,95015);
INSERT INTO creature_movement (id, point, position_x, position_y, position_z, waittime, script_id, orientation, model1, model2) VALUES
-- Fenissa the Assassin
(77281,1,-2087.58,-11384.4,62.8749, 0, 0,6.02729, 0, 0),
(77281,2,-2063.85,-11388.7,62.7058, 0, 0,0.15644, 0, 0),
(77281,3,-2042.63,-11378.3,63.2969, 0, 0,0.611971, 0, 0),
(77281,4,-2029.35,-11363.1,66.0157, 0, 0,1.04394, 0, 0),
(77281,5,-2021.29,-11341.8,64.3625, 0, 0,1.42486, 0, 0),
(77281,6,-2020.22,-11334,63.4975, 0, 0,1.51911, 0, 0),
(77281,7,-2023.12,-11322.2,66.1525, 0, 0,1.96445, 0, 0),
(77281,8,-2030.7,-11303.2,67.8879, 0, 0,1.51677, 0, 0),
(77281,9,-2026.73,-11290.3,69.0449, 0, 0,1.38796, 0, 0),
(77281,10,-2026.67,-11283.4,70.3952, 0, 0,1.60395, 0, 0),
(77281,11,-2029.25,-11274.6,67.533, 0, 0,2.18828, 0, 0),
(77281,12,-2036.82,-11266.3,69.8094, 0, 0,2.5425, 0, 0),
(77281,13,-2046.86,-11262.7,67.8685, 0, 0,2.82917, 0, 0),
(77281,14,-2065.65,-11258.5,69.4749, 0, 0,2.82524, 0, 0),
(77281,15,-2084.64,-11256,69.9936, 0, 0,3.0373, 0, 0),
(77281,16,-2099.87,-11253.7,67.3001, 0, 0,3.22422, 0, 0),
(77281,17,-2113.68,-11256.6,66.4249, 0, 0,3.48341, 0, 0),
(77281,18,-2127.98,-11262.1,68.886, 0, 0,3.50697, 0, 0),
(77281,20,-2133.3,-11266.4,67.9431, 0, 0,4.05125, 0, 0),
(77281,21,-2137.41,-11274,68.2033, 0, 0,4.26723, 0, 0),
(77281,22,-2141.49,-11287.2,61.278, 0, 0,4.64029, 0, 0),
(77281,23,-2137.39,-11304.9,61.2644, 0, 0,4.67207, 0, 0),
(77281,24,-2137.14,-11332.4,61.6994, 0, 0,4.73098, 0, 0),
(77281,25,-2135.03,-11346.2,62.3047, 0, 0,4.95874, 0, 0),
(77281,26,-2129.76,-11364.2,63.5013, 0, 0,5.1433, 0, 0),
(77281,27,-2123.03,-11374,64.2863, 0, 0,5.77632, 0, 0),
(77281,28,-2108.87,-11378.1,64.1418, 0, 0,6.02607, 0, 0),
-- Myst Spinner #1
(63027,1,-1395.67,-10627.4,106.623, 0, 0,5.83144, 0, 0),
(63027,2,-1384.75,-10636.2,102.216, 0, 0,5.45053, 0, 0),
(63027,3,-1375.86,-10646.3,97.9281, 0, 0,5.08453, 0, 0),
(63027,4,-1370.74,-10657,94.571, 0, 0,4.72718, 0, 0),
(63027,5,-1371.66,-10671.2,89.3448, 0, 0,4.31879, 0, 0),
(63027,6,-1378.66,-10685.6,85.126, 0, 0,3.8986, 0, 0),
(63027,7,-1392.84,-10694.8,80.3159, 0, 0,3.48626, 0, 0),
(63027,8,-1447.19,-10694.1,72.176, 0, 0,3.12891, 0, 0),
(63027,9,-1425.71,-10690.8,75.7674, 0, 0,0.0383646, 0, 0),
(63027,10,-1396.8,-10694.3,79.5103, 0, 0,0.336815, 0, 0),
(63027,11,-1377.83,-10684,85.5148, 0, 0,0.941572, 0, 0),
(63027,12,-1370.27,-10668,90.7028, 0, 0,1.31071, 0, 0),
(63027,13,-1371.62,-10656,94.8612, 0, 0,2.00971, 0, 0),
(63027,14,-1377.47,-10644,98.8471, 0, 0,2.26104, 0, 0),
(63027,15,-1395.08,-10626.2,106.911, 0, 0,2.73228, 0, 0),
(63027,16,-1422.29,-10620.1,115.958, 0, 0,2.97968, 0, 0),
(63027,17,-1435.71,-10620.5,121.573, 0, 0,3.38809, 0, 0),
(63027,18,-1450.59,-10626.3,128.107, 0, 0,3.48626, 0, 0),
(63027,19,-1475.38,-10635,133.251, 0, 0,3.53339, 0, 0),
(63027,20,-1498.77,-10647.3,134.425, 0, 0,3.63942, 0, 0),
(63027,21,-1529.7,-10663.5,133.025, 0, 0,3.6512, 0, 0),
(63027,22,-1544.44,-10668.8,131.063, 0, 0,3.35275, 0, 0),
(63027,23,-1604.59,-10661.1,133.426, 0, 0,2.95219, 0, 0),
(63027,24,-1569.95,-10666,131.334, 0, 0,6.15661, 0, 0),
(63027,25,-1541.87,-10665.2,131.556, 0, 0,0.203294, 0, 0),
(63027,26,-1522.5,-10657.5,133.427, 0, 0,0.466402, 0, 0),
(63027,27,-1504.99,-10648.9,134.165, 0, 0,0.438913, 0, 0),
(63027,28,-1487.15,-10639.2,134.706, 0, 0,0.544942, 0, 0),
(63027,29,-1468.51,-10631.4,132.124, 0, 0,0.289688, 0, 0),
(63027,30,-1446.67,-10625.2,126.786, 0, 0,0.376082, 0, 0),
(63027,31,-1431.81,-10619,119.789, 0, 0,0.122398, 0, 0),
(63027,32,-1414.33,-10621,113.047, 0, 0,5.99718, 0, 0),
-- Myst Spinner #2
(63022,1,-1509.37,-10750.5,57.3631, 0, 0,3.56245, 0, 0),
(63022,2,-1537.04,-10769.1,53.3528, 0, 0,4.1083, 0, 0),
(63022,3,-1546.03,-10781.9,52.5605, 0, 0,4.01013, 0, 0),
(63022,4,-1562.66,-10798.2,52.0579, 0, 0,4.25753, 0, 0),
(63022,5,-1576.85,-10832.4,49.905, 0, 0,3.43286, 0, 0),
(63022,6,-1601.74,-10829.3,53.5691, 0, 0,2.90272, 0, 0),
(63022,7,-1638.74,-10824.3,56.6142, 0, 0,3.58366, 0, 0),
(63022,8,-1642.36,-10830.5,57.7538, 0, 0,4.92512, 0, 0),
(63022,9,-1616.52,-10851.1,59.7892, 0, 0,5.60448, 0, 0),
(63022,10,-1589.05,-10880.9,59.7841, 0, 0,5.51809, 0, 0),
(63022,11,-1570.74,-10893.7,60.0126, 0, 0,0.0595631, 0, 0),
(63022,12,-1547.26,-10886.3,59.2155, 0, 0,0.4287, 0, 0),
(63022,13,-1571.34,-10892.6,59.9012, 0, 0,3.07157, 0, 0),
(63022,14,-1589.51,-10886.2,59.8294, 0, 0,2.30894, 0, 0),
(63022,15,-1615.91,-10851.7,59.8307, 0, 0,2.47388, 0, 0),
(63022,16,-1641.64,-10830.4,57.7216, 0, 0,1.08372, 0, 0),
(63022,17,-1634.97,-10824,56.2869, 0, 0,0.306177, 0, 0),
(63022,18,-1603.49,-10828.9,53.8009, 0, 0,6.07493, 0, 0),
(63022,19,-1579.65,-10833,49.794, 0, 0,0.734217, 0, 0),
(63022,20,-1571.05,-10820.2,51.7683, 0, 0,1.11906, 0, 0),
(63022,21,-1562.61,-10798.6,52.0926, 0, 0,0.914858, 0, 0),
(63022,22,-1545.99,-10781.7,52.5618, 0, 0,0.855953, 0, 0),
(63022,23,-1533.25,-10764.5,53.8602, 0, 0,0.69259, 0, 0),
(63022,24,-1509.19,-10750.4,57.3961, 0, 0,0.537867, 0, 0),
(63022,25,-1481.6,-10730.7,61.108, 0, 0,0.620334, 0, 0),
(63022,26,-1462.45,-10723.7,66.068, 0, 0,0.160876, 0, 0),
(63022,27,-1436.61,-10709.6,72.3182, 0, 0,0.369006, 0, 0),
(63022,28,-1416.36,-10690.3,77.0352, 0, 0,0.922712, 0, 0),
(63022,29,-1436.46,-10709.3,72.3872, 0, 0,3.57736, 0, 0),
(63022,30,-1478.67,-10728,61.7204, 0, 0,3.5538, 0, 0),
-- Sunhawk Saboteur #1
(63321,1,-1932.51,-10698.9,110.647, 0, 0,2.44198, 0, 0),
(63321,2,-1957.49,-10663.3,111.316, 0, 0,2.5323, 0, 0),
(63321,3,-1969.4,-10665.7,113.833, 0, 0,3.49284, 0, 0),
(63321,4,-1988.94,-10675.9,115.703, 0, 0,4.14079, 0, 0),
(63321,5,-1991.22,-10689.5,116.518, 0, 0,5.13039, 0, 0),
(63321,6,-1973.62,-10703.4,113.526, 0, 0,5.82939, 0, 0),
(63321,7,-1952.35,-10711.2,110.813, 0, 0,5.93542, 0, 0),
(63321,8,-1933.55,-10721.4,111.672, 0, 0,0.0449289, 0, 0),
(63321,9,-1907.99,-10721.1,112.06, 0, 0,5.87652, 0, 0),
(63321,10,-1893.61,-10732.4,111.552, 0, 0,5.5388, 0, 0),
(63321,11,-1880.95,-10737.2,110.792, 0, 0,0.319822, 0, 0),
(63321,12,-1875.56,-10731.7,111.142, 0, 0,1.17198, 0, 0),
(63321,13,-1870.27,-10709.7,111.601, 0, 0,1.75317, 0, 0),
(63321,14,-1875.85,-10698.5,111.393, 0, 0,2.47574, 0, 0),
(63321,15,-1884.73,-10696.4,111.278, 0, 0,3.27292, 0, 0),
(63321,16,-1900.46,-10704.2,110.427, 0, 0,3.23365, 0, 0),
(63321,17,-1918.74,-10703,110.545, 0, 0,2.85666, 0, 0),
-- Sunhawk Saboteur #2
(63329,1,-1871.93,-10562.3,176.138, 0, 0,2.3658, 0, 0),
(63329,2,-1856.07,-10572.6,169.287, 0, 0,5.62363, 0, 0),
(63329,3,-1841.75,-10586.9,161.334, 0, 0,5.62755, 0, 0),
(63329,4,-1829.08,-10594,154.043, 0, 0,5.76657, 0, 0),
(63329,5,-1817.55,-10603.8,150.479, 0, 0,5.26624, 0, 0),
(63329,6,-1812.05,-10616.4,147.953, 0, 0,4.90496, 0, 0),
(63329,7,-1812.82,-10633.4,146.124, 0, 0,4.61044, 0, 0),
(63329,8,-1815.02,-10652.3,142.207, 0, 0,4.31985, 0, 0),
(63329,9,-1822.01,-10665.4,137.946, 0, 0,3.95464, 0, 0),
(63329,10,-1827.1,-10672,134.121, 0, 0,3.75436, 0, 0),
(63329,11,-1849.21,-10684.6,118.272, 0, 0,3.73473, 0, 0),
(63329,12,-1858.94,-10693.6,110.305, 0, 0,3.544, 0, 0),
(63329,13,-1868.57,-10699.5,110.22, 0, 0,3.43326, 0, 0),
(63329,14,-1883.62,-10704.1,111.542, 0, 0,3.4097, 0, 0),
(63329,15,-1910.1,-10708.8,111.087, 0, 0,3.27225, 0, 0),
(63329,16,-1926.61,-10710.3,111.188, 0, 0,3.5118, 0, 0),
(63329,17,-1942.07,-10715.8,111.034, 0, 0,3.83381, 0, 0),
(63329,18,-1948.83,-10722.5,107.933, 0, 0,4.00268, 0, 0),
(63329,19,-1960.01,-10738.2,98.6078, 0, 0,4.0498, 0, 0),
(63329,20,-1974.96,-10755.8,91.9724, 0, 0,3.96733, 0, 0),
(63329,21,-1982.66,-10762.5,90.2313, 0, 0,3.60998, 0, 0),
(63329,22,-1999.94,-10767.3,88.028, 0, 0,3.42541, 0, 0),
(63329,23,-1983.1,-10762.1,90.236, 0, 0,0.62939, 0, 0),
(63329,24,-1972.08,-10753,92.7144, 0, 0,0.821812, 0, 0),
(63329,25,-1960,-10738.3,98.561, 0, 0,0.91606, 0, 0),
(63329,26,-1948.64,-10722.4,108.003, 0, 0,0.865009, 0, 0),
(63329,27,-1941.07,-10716,111.084, 0, 0,0.499799, 0, 0),
(63329,28,-1926.7,-10710.4,111.194, 0, 0,0.260252, 0, 0),
(63329,29,-1883.58,-10704,111.547, 0, 0,0.334865, 0, 0),
(63329,30,-1869.31,-10699.7,110.376, 0, 0,0.491944, 0, 0),
(63329,31,-1858.91,-10693.4,110.361, 0, 0,0.649024, 0, 0),
(63329,32,-1849.24,-10684.5,118.293, 0, 0,0.582265, 0, 0),
(63329,33,-1835.91,-10679,127.055, 0, 0,0.639599, 0, 0),
(63329,34,-1825.77,-10671.7,134.816, 0, 0,0.784898, 0, 0),
(63329,35,-1815.58,-10657,141.035, 0, 0,1.31897, 0, 0),
(63329,36,-1812.29,-10639.2,145.1, 0, 0,1.50746, 0, 0),
(63329,37,-1811.61,-10615.8,147.966, 0, 0,1.97085, 0, 0),
(63329,38,-1820,-10601.1,151.404, 0, 0,2.41067, 0, 0),
(63329,39,-1827.38,-10595.4,153.336, 0, 0,2.56383, 0, 0),
(63329,40,-1839.34,-10588.8,159.772, 0, 0,2.64629, 0, 0),
(63329,41,-1855.96,-10575.6,168.154, 0, 0,2.43816, 0, 0),
-- Sunhawk Saboteur #3
(63314,1,-1885.78,-10749,108.479, 0, 0,4.16997, 0, 0),
(63314,2,-1894.42,-10767.2,102.848, 0, 0,4.05216, 0, 0),
(63314,3,-1903.97,-10777.5,98.1378, 0, 0,3.75764, 0, 0),
(63314,4,-1919.38,-10786.6,92.5655, 0, 0,3.63983, 0, 0),
(63314,5,-1943.26,-10798,87.5092, 0, 0,3.60449, 0, 0),
(63314,6,-1919.33,-10786.7,92.5731, 0, 0,0.447188, 0, 0),
(63314,7,-1903.92,-10777.5,98.137, 0, 0,0.761348, 0, 0),
(63314,8,-1894.43,-10766.8,102.952, 0, 0,1.02838, 0, 0),
(63314,9,-1885.83,-10749.3,108.407, 0, 0,1.40145, 0, 0),
(63314,10,-1883.59,-10737.9,110.764, 0, 0,1.68909, 0, 0),
(63314,11,-1889.48,-10723.3,110.964, 0, 0,2.31741, 0, 0),
(63314,12,-1902.2,-10715.6,111.426, 0, 0,2.72582, 0, 0),
(63314,13,-1936.61,-10702.9,111.278, 0, 0,2.75723, 0, 0),
(63314,14,-1958.69,-10695.8,111.444, 0, 0,2.75723, 0, 0),
(63314,15,-1972.06,-10689.5,112.009, 0, 0,2.6512, 0, 0),
(63314,16,-1992.79,-10678,116.801, 0, 0,2.52947, 0, 0),
(63314,17,-2005.76,-10669.2,119.903, 0, 0,2.41166, 0, 0),
(63314,18,-2017.09,-10659.1,125.091, 0, 0,2.41166, 0, 0),
(63314,19,-2027.67,-10647,133.073, 0, 0,2.2585, 0, 0),
(63314,20,-2039.73,-10629.9,143.867, 0, 0,1.56343, 0, 0),
(63314,21,-2038.49,-10617.2,146.366, 0, 0,1.10004, 0, 0),
(63314,22,-2030.29,-10608.2,148.744, 0, 0,0.361766, 0, 0),
(63314,23,-2022.36,-10605.2,151.621, 0, 0,6.12659, 0, 0),
(63314,24,-1997.9,-10610.2,159.637, 0, 0,6.12659, 0, 0),
(63314,25,-1984.2,-10613.6,163.764, 0, 0,6.22476, 0, 0),
(63314,26,-1970.27,-10613.3,164.063, 0, 0,0.342129, 0, 0),
(63314,27,-1960.46,-10605.6,165.838, 0, 0,0.848711, 0, 0),
(63314,28,-1955.04,-10594.5,169.548, 0, 0,1.09611, 0, 0),
(63314,29,-1937.75,-10572.1,176.575, 0, 0,0.848711, 0, 0),
(63314,30,-1954.91,-10593.8,169.724, 0, 0,4.35944, 0, 0),
(63314,31,-1960.2,-10605.5,165.928, 0, 0,3.85373, 0, 0),
(63314,32,-1969.52,-10612.7,164.162, 0, 0,3.48852, 0, 0),
(63314,33,-1984.3,-10613.7,163.755, 0, 0,2.88376, 0, 0),
(63314,34,-2004.68,-10608.4,157.372, 0, 0,2.94659, 0, 0),
(63314,35,-2019.91,-10605.4,152.361, 0, 0,3.33537, 0, 0),
(63314,36,-2033.19,-10610.1,147.919, 0, 0,3.79482, 0, 0),
(63314,37,-2041.74,-10619.7,145.963, 0, 0,4.58414, 0, 0),
(63314,38,-2039.38,-10631,143.524, 0, 0,5.36168, 0, 0),
(63314,39,-2028.33,-10646.4,133.557, 0, 0,5.47949, 0, 0),
(63314,40,-2016.22,-10659.8,124.611, 0, 0,5.53839, 0, 0),
(63314,41,-2000.93,-10673,118.64, 0, 0,5.67976, 0, 0),
(63314,42,-1988.73,-10687.5,115.701, 0, 0,5.68369, 0, 0),
(63314,43,-1968.7,-10697.1,112.502, 0, 0,5.95464, 0, 0),
(63314,44,-1941.85,-10705,111.602, 0, 0,6.02533, 0, 0),
(63314,45,-1913.52,-10711.5,111.371, 0, 0,6.10779, 0, 0),
(63314,46,-1898.29,-10718,111.344, 0, 0,5.79364, 0, 0),
(63314,47,-1885.74,-10727.6,111.585, 0, 0,5.22737, 0, 0),
(63314,48,-1883.62,-10738.1,110.725, 0, 0,4.56765, 0, 0),
-- Sunhawk Agent
(95015,1,-1971.58,-10532.8,176.967, 0, 0,4.16073, 0, 0),
(95015,2,-1980.13,-10546.2,176.966, 0, 0,4.34136, 0, 0),
(95015,3,-1983.83,-10559.3,177.243, 0, 0,4.57305, 0, 0),
(95015,4,-1983,-10568.4,177.804, 0, 0,5.14639, 0, 0),
(95015,5,-1977.06,-10574.7,178.195, 0, 0,5.84146, 0, 0),
(95015,6,-1967.75,-10574.5,177.946, 0, 0,0.375085, 0, 0),
(95015,7,-1955.52,-10566.4,177.769, 0, 0,0.594997, 0, 0),
(95015,8,-1947.41,-10565.8,177.624, 0, 0,5.69223, 0, 0),
(95015,9,-1932.86,-10576.3,176.687, 0, 0,6.17525, 0, 0),
(95015,10,-1918.27,-10573.1,177.571, 0, 0,0.422211, 0, 0),
(95015,11,-1902.6,-10564.1,178.238, 0, 0,0.261204, 0, 0),
(95015,12,-1882.26,-10560.3,177.462, 0, 0,0.512532, 0, 0),
(95015,13,-1867.11,-10550.2,177.034, 0, 0,1.23117, 0, 0),
(95015,14,-1867.23,-10535.4,177.121, 0, 0,1.9184, 0, 0),
(95015,15,-1878.44,-10520.9,177.05, 0, 0,2.44854, 0, 0),
(95015,16,-1889.57,-10515,177.14, 0, 0,2.93549, 0, 0),
(95015,17,-1926.86,-10523,176.969, 0, 0,3.40673, 0, 0),
(95015,18,-1942.46,-10526.9,176.966, 0, 0,3.10042, 0, 0),
(95015,19,-1961.12,-10524.1,176.967, 0, 0,3.52296, 0, 0);

-- Chat between creatures
UPDATE creature SET MovementType = 2, spawndist = 0 WHERE guid IN (63341,63340,63333,63343,63335,63336,63338,63347,63350,63351,63354,63355,63356,63357,94965,95023);
DELETE FROM creature_movement WHERE id IN (63341,63340,63333,63343,63335,63336,63338,63347,63350,63351,63354,63355,63356,63357,94965,95023);
INSERT INTO creature_movement (id, point, position_x, position_y, position_z, waittime, script_id, orientation, model1, model2) VALUES
(63336,1,-1962.32,-10797.8,88.3052, 10000, 1761001,3.9619, 0, 0),
(63338,1,-2012.26,-10758.6,87.7187, 12000, 1761002,2.25148, 0, 0),
(63341,1,-1872.44,-10726.5,111.371, 11000, 1761001,4.88692, 0, 0),
(63335,1,-1917.83,-10725.3,111.913, 10000, 1761002,6.21337, 0, 0),
(63343,1,-1944.94,-10677.6,110.53, 12000, 1761003,2.37365, 0, 0),
(63340,1,-1994,-10691.8,117.466, 11000, 1761002,3.83972, 0, 0),
(63350,1,-1986.4,-10571.6,177.993, 10000, 1761003,5.35816, 0, 0),
(63356,1,-1939.96,-10521.9,177.065, 12000, 1761002,3.76991, 0, 0),
(63354,1,-1902.59,-10567.8,178.332, 11000, 1761003,6.10865, 0, 0),
(63355,1,-1894.18,-10519.4,177.049, 10000, 1761002,4.79965, 0, 0),
(63351,1,-1875.16,-10542,177.049, 12000, 1761001,6.24828, 0, 0),
(63347,1,-2053.86,-10626.6,146.965, 11000, 1761002,1.81514, 0, 0),
(63333,1,-1809.75,-10595.4,149.425, 10000, 1761001,5.2709, 0, 0),
(63357,1,-1824.36,-10637.1,147.243, 12000, 1761002,4.92183, 0, 0),
(94965,1,-1965.61,-10620.2,163.838, 11000, 1761001,2.55875, 0, 0),
(95023,1,-1960.72,-10549.7,176.892, 10000, 1761002,0.701538, 0, 0);

DELETE FROM db_scripts WHERE id BETWEEN 1761001 AND 1761003; 
INSERT INTO db_scripts (script_type, id, delay, command, datalong, datalong2, buddy_entry, search_radius, data_flags, dataint, dataint2, dataint3, dataint4, x, y, z, o, comments) VALUES
(3,1761001,0,31,17609,20,0,0,0,0,0,0,0,0,0,0,0,''),
(3,1761001,1,1,1,0,17609,20,7,6,273,274,0,0,0,0,0,''),
(3,1761001,6,1,1,0,0,0,0,274,273,6,0,0,0,0,0,''),
(3,1761002,4,31,17609,20,0,0,0,0,0,0,0,0,0,0,0,''),
(3,1761002,5,1,274,0,17609,20,7,6,273,1,0,0,0,0,0,''),
(3,1761002,9,1,273,0,0,0,0,274,1,6,0,0,0,0,0,''),
(3,1761003,4,31,17610,20,0,0,0,0,0,0,0,0,0,0,0,''),
(3,1761003,5,1,274,0,17610,20,7,6,273,1,0,0,0,0,0,''),
(3,1761003,9,1,273,0,0,0,0,274,1,6,0,0,0,0,0,'');   
    

        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -
        -- -- PLACE UPDATE SQL ABOVE -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
        -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -

        -- If we get here ok, commit the changes
        IF bRollback = TRUE THEN
            ROLLBACK;
            SHOW ERRORS;
            SELECT '* UPDATE FAILED *' AS `===== Status =====`,@cCurResult AS `===== DB is on Version: =====`;



        ELSE
            COMMIT;
            SELECT '* UPDATE COMPLETE *' AS `===== Status =====`,@cNewResult AS `===== DB is now on Version =====`;
        END IF;
    ELSE    -- Current version is not the expected version
        IF (@cCurResult = @cNewResult) THEN    -- Does the current version match the new version
            SELECT '* UPDATE SKIPPED *' AS `===== Status =====`,@cCurResult AS `===== DB is already on Version =====`;
        ELSE    -- Current version is not one related to this update
            IF(@cCurResult IS NULL) THEN    -- Something has gone wrong
                SELECT '* UPDATE FAILED *' AS `===== Status =====`,'Unable to locate DB Version Information' AS `============= Error Message =============`;
            ELSE
		IF(@cOldResult IS NULL) THEN    -- Something has gone wrong
		    SET @cCurVersion := (SELECT `version` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
		    SET @cCurStructure := (SELECT `STRUCTURE` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
		    SET @cCurContent := (SELECT `Content` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
                    SET @cCurOutput = CONCAT(@cCurVersion, '_', @cCurStructure, '_', @cCurContent, ' - ',@cCurResult);
                    SET @cOldResult = CONCAT('Rel',@cOldVersion, '_', @cOldStructure, '_', @cOldContent, ' - ','IS NOT APPLIED');
                    SELECT '* UPDATE SKIPPED *' AS `===== Status =====`,@cOldResult AS `=== Expected ===`,@cCurOutput AS `===== Found Version =====`;
		ELSE
		    SET @cCurVersion := (SELECT `version` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
		    SET @cCurStructure := (SELECT `STRUCTURE` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
		    SET @cCurContent := (SELECT `Content` FROM db_version ORDER BY `version` DESC, STRUCTURE DESC, CONTENT DESC LIMIT 0,1);
                    SET @cCurOutput = CONCAT(@cCurVersion, '_', @cCurStructure, '_', @cCurContent, ' - ',@cCurResult);
                    SELECT '* UPDATE SKIPPED *' AS `===== Status =====`,@cOldResult AS `=== Expected ===`,@cCurOutput AS `===== Found Version =====`;
                END IF;
            END IF;
        END IF;
    END IF;
END $$

DELIMITER ;

-- Execute the procedure
CALL update_mangos();

-- Drop the procedure
DROP PROCEDURE IF EXISTS `update_mangos`;

